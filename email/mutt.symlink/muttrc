set mbox_type = Maildir
set folder = ~/Maildir

mailboxes `echo -n "+ "; find ~/Maildir -maxdepth 1 -type d -printf "+'%f' "`
source "/home/andre/.mutt/badwolf.muttrc"

set realname = "André Walker"
set from = "andre@andrewalker.net"
set use_from = yes
set envelope_from ="yes"
set sendmail = "/usr/bin/msmtp"

set mbox = "+Archive/"
set spoolfile="+INBOX/"
set record="+INBOX/"
set postponed="+Drafts/"
folder-hook . 'set record="^"'

set editor="vim"

set smart_wrap = yes
set wrapmargin = 10

set header_cache     = ~/.mutt/cache/headers
set message_cachedir = ~/.mutt/cache/bodies
set certificate_file = ~/.mutt/certificates
set mailcap_path     = ~/.mutt/mailcap
set tmpdir           = ~/.mutt/temp

set wait_key = no        # shut up, mutt
set timeout = 3          # idle time before scanning
set mail_check = 0       # minimum time between scans
unset move               # gmail does that
set delete               # don't ask, just do
unset confirmappend      # don't ask, just do!
set quit                 # don't ask, just do!!
unset mark_old           # read/new is good enough for me
set beep_new             # bell on new mails
#set pipe_decode         # strip headers and eval mimes when piping
set thorough_search      # strip headers and eval mimes before searching
set send_charset="utf-8"

set status_chars  = " *%A"
set status_format = "───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"

set date_format = "%d/%m"
set index_format = "[%Z]  %D  %-20.20F  %s"
set sort = threads
set sort_aux = reverse-last-date-received
set uncollapse_jump                        # don't collapse on an unread message
set sort_re                                # thread based on regex
set reply_regexp = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"
set folder_format = "%2C %t %N %8s %f"

set tilde                  # show tildes like in vim
unset markers              # no ugly plus signs
set quote_regexp = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"

alternative_order text/html text/enriched text/plain

auto_view text/plain text/richtext text/html text/x-sgml text/x-vcard text/x-sh \
    text/x-csrc text/tex text/-xtex text/english message/partial

set sig_dashes                       # dashes before sig
set edit_headers                     # show headers when composing
set fast_reply                       # skip to compose when replying
set fcc_attach                       # save attachments with the body
set mime_forward                     # forward attachments as part of body
set forward_format = "Fwd: %s"       # format of subject when forwarding
set attribution = "On %d, %n wrote:" # format of quoting header
set reply_to                         # reply to Reply to: field
unset reverse_name                   # don't reply as whomever it was to
set include                          # include message in replies
set forward_quote                    # include message in forwards

set attach_format = "[%D %t] %2n [%-7.7m/%10.10M] %.40d %> [%s] "

ignore *                                # ignore all headers
unignore from: to: cc: date: subject:   # show only these
unhdr_order *
hdr_order from: to: cc: date: subject:  # and in this order

# Alternate email addresses.
alternates "andrewalker.net@gmail.com"

bind index k        previous-entry
bind index j        next-entry
bind index gg       first-entry
bind index G        last-entry
bind index p        recall-message
bind index <space>  collapse-thread
bind index N        search-opposite
macro index s "<pipe-message>cat > ~/Desktop/"  "save message as"

# Mark all as read
macro index \Cr "T~U<enter><tag-prefix><clear-flag>N<untag-pattern>.<enter>" "mark all messages as read"

macro index,pager \cx \
    ":set autoedit=no editor=\"/bin/true\"\n<tag-prefix><forward-message>submit.X6PV7XkDtUOhso8K@spam.spamcop.net\n<send-message>:set autoedit=yes editor=\"vim\"\n" \
    "Forward mail to SpamCop"

# Sync email
macro index O "<shell-escape>offlineimap<enter>"  "run offlineimap to sync all mail"
macro index,pager C "<copy-message>?<toggle-mailboxes>" "copy a message to a mailbox"
macro index,pager M "<save-message>?<toggle-mailboxes>" "move a message to a mailbox"
macro index,pager \ca "<save-message>+Archive<enter>" "archive message"
macro index,pager \cX "<save-message>+Junk<enter>" "move message to junk"

bind pager N  search-opposite

macro index,pager \cb "<enter-command>set my_pdsave=\$pipe_decode<enter><enter-command>unset pipe_decode<enter><pipe-message>extract_url.pl<enter><enter-command>set pipe_decode=\$my_pdsave<enter>" "get URLs"

macro pager s "<pipe-message>cat > ~/Desktop/"  "save message as"
bind compose p postpone-message
bind attach <return> view-mailcap
macro index,pager V "|vim -c 'setlocal ft=mail' -c 'setlocal buftype=nofile' -<enter>" "open in vim"
